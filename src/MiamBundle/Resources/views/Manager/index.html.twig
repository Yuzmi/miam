{% extends 'MiamBundle::base.html.twig' %}

{% block stylesheets %}
	{{ parent() }}
	{% stylesheets "@MiamBundle/Resources/public/scss/manager.scss" filter='scss' output='css/manager.css' %}
		<link href="{{ asset_url }}" type="text/css" rel="stylesheet">
	{% endstylesheets %}
{% endblock %}

{% block body %}
	{% include 'MiamBundle:Default:header.html.twig' %}
	
	<div class="body_manager">
		<h1>Manager</h1>

		<section class="tab catsubs">
			<div class="header">
				Categories & Subscriptions
			</div>
			<div class="content">
				<div class="buttons">
					<button class="createCategory">
						Create a category
					</button>

					<button class="createSubscription">
						Subscribe to a feed
					</button>

					<button class="exportOPML">
						Export OPML
					</button>

					<button class="importOPML">
						Import OPML
					</button>
				</div>

				<div class="tree">
					{% include 'MiamBundle:Manager:tree.html.twig' %}
				</div>
			</div>
		</section>

		<section class="tab settings">
			<div class="header">
				Settings
			</div>
			<div class="content">
				<form method="POST" action="{{ path('manager_settings_update') }}">
					Show item pictures :
					<select name="DISPLAY_PICTURES">
						<option value="yes" {{ app.user.setting('DISPLAY_PICTURES') == 'yes' ? 'selected' }}>Always</option>
						<option value="onclick" {{ app.user.setting('DISPLAY_PICTURES') == 'onclick' ? 'selected' }}>On click</option>
						<option value="no" {{ app.user.setting('DISPLAY_PICTURES') == 'no' ? 'selected' }}>Never</option>
					</select>

					<br><br>

					Publish my feeds : <input type="checkbox" name="IS_PUBLIC" value="1" {{ app.user.setting('IS_PUBLIC') ? 'checked' }}>

					<br><br>

					<button type="submit">Enregistrer</button>

					<input type="hidden" name="csrf_token" value="{{ csrf_token('manager_settings_update') }}">
				</form>
			</div>
		</section>
	</div>
{% endblock %}

{% block javascripts %}
	{{ parent() }}

	{% javascripts "@MiamBundle/Resources/public/js/manager.js" %}
		<script src="{{ asset_url }}"></script>
	{% endjavascripts %}

	<script type="text/javascript">
		app.manager.init();
	</script>
{% endblock %}